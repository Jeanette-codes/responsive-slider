!function(a){a.fn.extend({fenMove:function(){"undefined"!=typeof arguments[0]?arguments[0]:{},this.barwidth=10,this.mouseOver=!1,this.mouseDown=!1,this.moveListener=!1,this.cursorListener=!1,this.children=a(this).children(),this.direction,this.posTop,this.posLeft,this.init=function(){this.setSize(),this.setMouseOver();var b=a(this).offset().left+a(this).outerWidth()-this.getPadding(this)[1];console.log(a(this).offset().left,a(this).outerWidth(),this.getPadding(this)[1],b)},this.setSize=function(){this.resizeTop=this.position().top+this.barwidth,this.resizeLeft=this.position().left+this.barwidth,this.resizeRight=this.position().left+this.width()-this.barwidth,this.resizeBottom=this.position().top+this.height()-this.barwidth,this.cx,this.cy},this.setMouseOver=function(){this.on("mouseover",a.proxy(function(b){b.stopPropagation(),this.mouseOver=!0,this.setCListener(this.mouseDown),this.moveListener===!1&&(this.setMoveListener(),this.moveListener=!0),this.one("mouseout",a.proxy(function(){this.mouseOver=!1,this.mouseDown===!1&&(this.removeCListener(),this.cursorListener=!1)},this))},this))},this.setCListener=function(){this.cursorListener===!1&&(a(window).on("mousemove",a.proxy(function(a){this.cx=a.clientX,this.cy=a.clientY,this.setCursor(),this.mouseDown===!0&&this.resize()},this)),this.cursorListener=!0)},this.removeCListener=function(){a(window).unbind()},this.hit=function(){return this.cy<this.resizeTop&&this.cx>this.resizeLeft&&this.cx<this.resizeRight?"N":this.cx>this.resizeRight&&this.cy<this.resizeBottom&&this.cy>this.resizeTop?"E":this.cy>this.resizeBottom&&this.cx<this.resizeRight&&this.cx>this.resizeLeft?"S":this.cx<this.resizeLeft&&this.cy<this.resizeBottom&&this.cy>this.resizeTop?"W":this.cy<this.resizeTop&&this.cx>this.resizeRight?"NE":this.cy>this.resizeBottom&&this.cx>this.resizeRight?"SE":this.cy>this.resizeBottom&&this.cx<this.resizeLeft?"SW":this.cy<this.resizeTop&&this.cx<this.resizeLeft?"NW":void 0},this.setCursor=function(){var a=this.hit();switch(a){case"N":this.css("cursor","row-resize");break;case"NE":this.css("cursor","nesw-resize");break;case"E":this.css("cursor","col-resize");break;case"SE":this.css("cursor","nwse-resize");break;case"S":this.css("cursor","row-resize");break;case"SW":this.css("cursor","nesw-resize");break;case"W":this.css("cursor","col-resize");break;case"NW":this.css("cursor","nwse-resize");break;default:this.css("cursor","default")}},this.startDimensions=function(){this.direction=this.hit(),this.posTop=this.offset().top,this.posLeft=this.offset().left},this.setMoveListener=function(){self=this,this.mouseOver===!0&&this.one("mousedown",a.proxy(function(){this.mouseDown=!0,this.startDimensions(),a(document).one("mouseup",a.proxy(function(){this.mouseDown=!1,this.mouseOver===!0?(this.setCListener(),this.setMoveListener()):(this.removeCListener(),this.removeMoveListener(),this.cursorListener=!1,this.moveListener=!1)},this))},this))},this.removeMoveListener=function(){this.unbind("mousedown"),this.unbind("mouseup")},this.resize=function(){switch(this.direction){case"E":this.constrainInner("E")&&a(this).width(this.cx-this.posLeft),this.setSize();break;case"SE":a(this).width(this.cx-this.posLeft),a(this).height(this.cy-this.posTop),this.setSize();break;case"S":a(this).height(this.cy-this.posTop),this.setSize()}},this.constrainInner=function(b){self=this;var c=0,d=0,e=a(this).offset().left+a(this).outerWidth()-this.getPadding(this)[1];switch(this.children.each(function(){var b=a(this).offset().left+a(this).outerWidth()+self.getMargin(this)[1],e=a(this).offset().top+a(this).outerHeight()+self.getMargin(this)[2];b>c&&(c=b),e>d&&(d=e),console.log(a(this).position().left)}),console.log(c,e),b){case"E":if(e>c)return!0}},this.getPadding=function(b){var c=[];return c.push(parseInt(a(b).css("padding-top"))),c.push(parseInt(a(b).css("padding-right"))),c.push(parseInt(a(b).css("padding-bottom"))),c.push(parseInt(a(b).css("padding-left"))),c},this.getMargin=function(b){var c=[];return c.push(parseInt(a(b).css("margin-top"))),c.push(parseInt(a(b).css("margin-right"))),c.push(parseInt(a(b).css("margin-bottom"))),c.push(parseInt(a(b).css("margin-left"))),c},this.init()}})}(jQuery),$(document).ready(function(){$(".box").each(function(){console.log(this),$(this).fenMove()})});